!function(e){"use strict";var t=function(){var e=window,t=function(t,a){var n=document,i=this;"string"==typeof t&&(t=n.getElementById(t));var s=function(e){return n.querySelectorAll(e)[0]},r=function(e,t){return e&&e[t]||""},o=function(e,t){if(e)for(var a=e.length,n=0;n<a;n++)t(n,e[n])},l=function(e,t,a){var n=[t.toLowerCase(),"webkit"+t,"MS"+t,"o"+t];o(n,function(t,n){e[n]=a})},d=function(e,t,a){var n=[a.toLowerCase(),"webkit"+a,"MS"+a,"o"+a];o(n,function(a,n){e.addEventListener(n,t,!1)})},c=function(e,t){d(e,t,"AnimationEnd")},u=function(e,t){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},v=function(e,t){var a="RequestFullScreen";if(t)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else try{e.requestFullScreen?e.requestFullScreen():e["ms"+a]?e["ms"+a]():e["moz"+a]?e["moz"+a]():e["webkit"+a]&&e["webkit"+a]()}catch(e){}},m=function(e,t,a,n){var i=t>0?1:-1,r=Math.abs(t)/s("#zuck-modal").offsetWidth*90*i;if(h("cubeEffect")){var o=0==r?"scale(0.95)":"scale(0.930,0.930)";if(l(s("#zuck-modal-content").style,"Transform",o),r<-90||r>90)return!1}var d=h("cubeEffect")?"rotateY("+r+"deg)":"translate3d("+t+"px, 0, 0)";e&&(l(e.style,"TransitionTimingFunction",n),l(e.style,"TransitionDuration",a+"ms"),l(e.style,"Transform",d))},f=function(e,t,a,n){var i=0,s=0;if(e){if(e.offsetParent)do{if(i+=e.offsetLeft,s+=e.offsetTop,e==n)break}while(e=e.offsetParent);t&&(s-=t),a&&(i-=a)}return[i,s]},p=function(e){e=1e3*Number(e);var t=new Date(e),a=t.getTime(),n=((new Date).getTime()-a)/1e3,i=h("language","time"),s=[[60," "+i.seconds,1],[120,"1 "+i.minute,""],[3600," "+i.minutes,60],[7200,"1 "+i.hour,""],[86400," "+i.hours,3600],[172800," "+i.yesterday,""],[604800," "+i.days,86400]],r=1;n<0&&(n=Math.abs(n),r=2);for(var o=0,l=void 0;l=s[o++];)if(n<l[0])return"string"==typeof l[2]?l[r]:Math.floor(n/l[2])+l[1];return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},y=t.id,g={skin:"snapgram",avatars:!0,stories:[],backButton:!1,backNative:!1,previousTap:!1,autoFullScreen:!1,openEffect:!0,cubeEffect:!1,list:!1,localStorage:!0,callbacks:{onOpen:function(e,t){t()},onView:function(e){},onEnd:function(e,t){t()},onClose:function(e,t){t()},onNextItem:function(e,t,a){a()},onNavigateItem:function(e,t,a){a()}},language:{unmute:"Click for Sound On",keyboardTip:"Press space to see next",visitLink:"Visit link",time:{ago:"ago",hour:"hour ago",hours:"hours ago",minute:"minute ago",minutes:"minutes ago",fromnow:"from now",seconds:"seconds ago",yesterday:"yesterday",tomorrow:"tomorrow",days:"days ago"}}},h=function(e,t){var n=function(e){return void 0!==e};return t?n(a[e])&&n(a[e][t])?a[e][t]:g[e][t]:n(a[e])?a[e]:g[e]},k=new function(){var t,a,l=s("#zuck-modal");l||e.Zuck.hasModal||(e.Zuck.hasModal=!0,(l=n.createElement("div")).id="zuck-modal",h("cubeEffect")&&(l.className="with-cube"),l.innerHTML='<div id="zuck-modal-content"></div>',l.style.display="none",l.setAttribute("tabIndex","1"),l.onkeyup=function(e){var t=e.keyCode;27==t?k.close():13!=t&&32!=t||k.next()},h("openEffect")&&l.classList.add("with-effects"),a=function(){l.classList.contains("closed")&&(g.innerHTML="",l.style.display="none",l.classList.remove("closed"),l.classList.remove("animated"))},(t=l).transitionEndEvent||(t.transitionEndEvent=!0,d(t,a,"TransitionEnd")),n.body.appendChild(l));var g=s("#zuck-modal-content"),b=function(e){var t=s("#zuck-modal"),a="",n="",r="0",o=s("#zuck-modal-slider-"+y),l={previous:s("#zuck-modal .story-viewer.previous"),next:s("#zuck-modal .story-viewer.next"),viewing:s("#zuck-modal .story-viewer.viewing")};if(!l.previous&&!e||!l.next&&e)return!1;e?(a="next",n="previous"):(a="previous",n="next"),h("cubeEffect")?"previous"==a?r=t.slideWidth:"next"==a&&(r=-1*t.slideWidth):r=-1*(r=f(l[a]))[0],m(o,r,600,null),setTimeout(function(){if(""!=a&&l[a]&&""!=n){var e=l[a].getAttribute("data-story-id");i.internalData.currentStory=e;var t=s("#zuck-modal .story-viewer."+n);t&&t.parentNode.removeChild(t),l.viewing&&(l.viewing.classList.add("stopped"),l.viewing.classList.add(n),l.viewing.classList.remove("viewing")),l[a]&&(l[a].classList.remove("stopped"),l[a].classList.remove(a),l[a].classList.add("viewing"));var r=L(a);r&&z(r,a);var d=i.internalData.currentStory,u=s('#zuck-modal [data-story-id="'+d+'"]');if(u){var v=(u=u.querySelectorAll("[data-index].active"))[0].firstElementChild;i.data[d].currentItem=parseInt(u[0].getAttribute("data-index"),10),u[0].innerHTML='<b style="'+v.style.cssText+'"></b>',c(u[0].firstElementChild,function(){i.nextItem(!1)})}m(o,"0",0,null),u&&x([u[0],u[1]],!0),h("callbacks","onView")(i.internalData.currentStory)}},650)},z=function(e,t,a){s("#zuck-modal");var l=s("#zuck-modal-slider-"+y),d="",v="",m=r(e,"id"),f=n.createElement("div"),g=r(e,"currentItem")||0,b=s('#zuck-modal .story-viewer[data-story-id="'+m+'"]'),L="";if(b)return!1;f.className="slides",o(r(e,"items"),function(t,a){g>t&&(e.items[t].seen=!0,a.seen=!0);var n=r(a,"length"),i=r(a,"linkText"),s=!0===r(a,"seen")?"seen":"",o='data-index="'+t+'" data-item-id="'+r(a,"id")+'"';g===t&&(L=p(r(a,"time"))),v+="<span "+o+' class="'+(g===t?"active":"")+" "+s+'"><b style="animation-duration:'+(""===n?"3":n)+'s"></b></span>',d+='<div data-time="'+r(a,"time")+'" data-type="'+r(a,"type")+'"'+o+' class="item '+s+" "+(g===t?"active":"")+'">'+("video"===r(a,"type")?'<video class="media" muted webkit-playsinline playsinline preload="metadata" src="'+r(a,"src")+'" '+r(a,"type")+'></video><b class="tip muted">'+h("language","unmute")+"</b>":'<img class="media" src="'+r(a,"src")+'" '+r(a,"type")+">")+(r(a,"link")?'<a class="tip link" href="'+r(a,"link")+'" rel="noopener" target="_blank">'+(""!=i&&i?i:h("language","visitLink"))+"</a>":"")+"</div>"}),f.innerHTML=d;var w=f.querySelector("video"),E=function(e){e.muted?S.classList.add("muted"):S.classList.remove("muted")};w&&(w.onwaiting=function(e){w.paused&&(S.classList.add("paused"),S.classList.add("loading"))},w.onplay=function(){E(w),S.classList.remove("stopped"),S.classList.remove("paused"),S.classList.remove("loading")},w.onready=w.onload=w.onplaying=w.oncanplay=function(){E(w),S.classList.remove("loading")},w.onvolumechange=function(){E(w)});var S=n.createElement("div");S.className="story-viewer muted "+t+" "+(a?"":"stopped")+" "+(h("backButton")?"with-back-button":""),S.setAttribute("data-story-id",m);var A='<div class="head"><div class="left">'+(h("backButton")?'<a class="back">âœ–</a>':"")+'<u class="img" style="background-image:url('+r(e,"photo")+');"></u><div><strong>'+r(e,"name")+'</strong><span class="time">'+L+'</span></div></div><div class="right"><span class="time">'+L+'</span><span class="loading"></span><a class="close" tabIndex="2">&times;</a></div></div><div class="slides-pointers"><div>'+v+"</div></div>";S.innerHTML=A,o(S.querySelectorAll(".close, .back"),function(e,t){t.onclick=function(e){e.preventDefault(),k.close()}}),S.appendChild(f),"viewing"==t&&x(S.querySelectorAll('[data-index="'+g+'"].active'),!1),o(S.querySelectorAll(".slides-pointers [data-index] > b"),function(e,t){c(t,function(){i.nextItem(!1)})}),"previous"==t?u(l,S):l.appendChild(S)};return{show:function(t,a){var r=s("#zuck-modal");h("callbacks","onOpen")(t,function(){g.innerHTML='<div id="zuck-modal-slider-'+y+'" class="slider"></div>';var a=i.data[t],o=a.currentItem||0;!function(t){var a=s("#zuck-modal"),r=t,o={},l=void 0,d=void 0,c=void 0,u=void 0,v=void 0,p=function(e){var t=s("#zuck-modal .viewing");if("A"==e.target.nodeName)return!0;e.preventDefault();var n=e.touches?e.touches[0]:e,i=f(s("#zuck-modal .story-viewer.viewing"));a.slideWidth=s("#zuck-modal .story-viewer").offsetWidth,o={x:i[0],y:i[1]};var m=n.pageX,p=n.pageY;l={x:m,y:p,time:Date.now()},d=void 0,c={},r.addEventListener("mousemove",y),r.addEventListener("mouseup",g),r.addEventListener("mouseleave",g),r.addEventListener("touchmove",y),r.addEventListener("touchend",g),t&&t.classList.add("paused"),E(),u=setTimeout(function(){t.classList.add("longPress")},600),v=setTimeout(function(){clearInterval(v),v=!1},250)},y=function(e){var t=e.touches?e.touches[0]:e,a=t.pageX,n=t.pageY;l&&(c={x:a-l.x,y:n-l.y},void 0===d&&(d=!!(d||Math.abs(c.x)<Math.abs(c.y))),!d&&l&&(e.preventDefault(),m(r,o.x+c.x,0,null)))},g=function t(f){var p=s("#zuck-modal .viewing"),g=l;if(c){n.querySelectorAll("#zuck-modal .story-viewer").length;var k=l?Date.now()-l.time:void 0,L=Number(k)<300&&Math.abs(c.x)>25||Math.abs(c.x)>a.slideWidth/3,w=c.x<0,x=s(w?"#zuck-modal .story-viewer.next":"#zuck-modal .story-viewer.previous");d||(!L||w&&!x||!w&&!x?m(r,o.x,300):b(w)),l=void 0,r.removeEventListener("mousemove",y),r.removeEventListener("mouseup",t),r.removeEventListener("mouseleave",t),r.removeEventListener("touchmove",y),r.removeEventListener("touchend",t)}var E=i.internalData.currentVideoElement;if(u&&clearInterval(u),p&&(p.classList.remove("longPress"),p.classList.remove("paused")),v){clearInterval(v),v=!1;var A=function(){g.x>e.screen.width/3||!h("previousTap")?i.navigateItem("next",f):i.navigateItem("previous",f)},z=s("#zuck-modal .viewing");if(!z||!E)return A(),!1;z.classList.contains("muted")?S(E,z):A()}};r.addEventListener("touchstart",p),r.addEventListener("mousedown",p)}(s("#zuck-modal-slider-"+y)),i.internalData.currentStory=t,a.currentItem=o,h("backNative")&&(location.hash="#!"+y);var l=L("previous");l&&z(l,"previous"),z(a,"viewing",!0);var d=L("next");d&&z(d,"next"),h("autoFullScreen")&&r.classList.add("fullscreen");var c=function(){r.classList.contains("fullscreen")&&h("autoFullScreen")&&e.screen.width<=1024&&v(r),r.focus()};if(h("openEffect")){var u=s("#"+y+' [data-id="'+t+'"] .img'),p=f(u);r.style.marginLeft=p[0]+u.offsetWidth/2+"px",r.style.marginTop=p[1]+u.offsetHeight/2+"px",r.style.display="block",r.slideWidth=s("#zuck-modal .story-viewer").offsetWidth,setTimeout(function(){r.classList.add("animated")},10),setTimeout(function(){c()},300)}else r.style.display="block",r.slideWidth=s("#zuck-modal .story-viewer").offsetWidth,c();h("callbacks","onView")(t)})},next:function(e){s("#zuck-modal"),h("callbacks","onEnd")(i.internalData.currentStory,function(){var e=i.internalData.currentStory,t=s("#"+y+' [data-id="'+e+'"]');t&&(t.classList.add("seen"),i.data[e].seen=!0,i.internalData.seenItems[e]=!0,A("seenItems",i.internalData.seenItems),w()),s("#zuck-modal .story-viewer.next")?b(!0):k.close()})},close:function(){var e=s("#zuck-modal");h("callbacks","onClose")(i.internalData.currentStory,function(){h("backNative"),v(e,!0),h("openEffect")?e.classList.add("closed"):(g.innerHTML="",e.style.display="none")})}}},b=function(e){var t=e.getAttribute("data-id"),a=!1;i.internalData.seenItems[t]&&(a=!0),a?e.classList.add("seen"):e.classList.remove("seen");try{i.data[t]={id:t,photo:e.getAttribute("data-photo"),name:e.firstElementChild.lastElementChild.firstChild.innerText,link:e.firstElementChild.getAttribute("href"),lastUpdated:e.getAttribute("data-last-updated"),seen:a,items:[]}}catch(e){i.data[t]={items:[]}}e.onclick=function(e){e.preventDefault(),k.show(t)}},L=function(e){var t=i.internalData.currentStory,a=e+"ElementSibling";if(t){var n=s("#"+y+' [data-id="'+t+'"]')[a];if(n){var r=n.getAttribute("data-id");return i.data[r]||!1}}return!1},w=function(){o(n.querySelectorAll("#"+y+" .story.seen"),function(e,t){var a=i.data[t.getAttribute("data-id")];t.parentNode.removeChild(t),i.add(a,!0)})},x=function(e,t){var a=e[1],n=e[0],s=n.parentNode.parentNode.parentNode;if(!a||!n)return!1;var r=i.internalData.currentVideoElement;if(r&&r.pause(),"video"==a.getAttribute("data-type")){var o=a.getElementsByTagName("video")[0];if(!o)return i.internalData.currentVideoElement=!1,!1;var d=function(){o.duration&&l(n.getElementsByTagName("b")[0].style,"AnimationDuration",o.duration+"s")};d(),o.addEventListener("loadedmetadata",d),i.internalData.currentVideoElement=o,o.currentTime=0,o.play(),t.target&&S(o,s)}else i.internalData.currentVideoElement=!1},E=function(){var e=i.internalData.currentVideoElement;if(e)try{e.pause()}catch(e){}},S=function(e,t){e.muted=!1,e.volume=1,e.removeAttribute("muted"),e.play(),e.paused&&(e.muted=!0,e.play()),t&&t.classList.remove("paused")},A=function(t,a){try{if(h("localStorage")){var n="zuck-"+y+"-"+t;e.localStorage[n]=JSON.stringify(a)}}catch(e){}};i.data={},i.internalData={},i.internalData.seenItems=function(t){if(h("localStorage")){var a="zuck-"+y+"-"+t;return!!e.localStorage[a]&&JSON.parse(e.localStorage[a])}return!1}("seenItems")||{},i.add=i.update=function(e,a){var l,d=r(e,"id"),c=s("#"+y+' [data-id="'+d+'"]'),v=r(e,"items"),m=!1;i.data[d]={},c?m=c:(m=n.createElement("div")).className="story",!1===e.seen&&(i.internalData.seenItems[d]=!1,A("seenItems",i.internalData.seenItems)),m.setAttribute("data-id",d),m.setAttribute("data-photo",r(e,"photo")),m.setAttribute("data-last-updated",r(e,"lastUpdated"));var f=!1;v[0]&&(f=v[0].preview||""),l='<a href="'+r(e,"link")+'"><span class="img"><u style="background-image:url('+(h("avatars")||!f||""==f?r(e,"photo"):f)+')"></u></span><span class="info"><strong>'+r(e,"name")+'</strong><span class="time">'+p(r(e,"lastUpdated"))+'</span></span></a><ul class="items"></ul>',m.innerHTML=l,b(m),c||(a?t.appendChild(m):u(t,m)),o(v,function(e,t){i.addItem(d,t,a)}),a||w()},i.next=function(){k.next()},i.remove=function(e){var t=s("#"+y+' > [data-id="'+e+'"]');t.parentNode.removeChild(t)},i.addItem=function(e,t,a){var l=s("#"+y+' > [data-id="'+e+'"]'),d=n.createElement("li");d.className=r(t,"seen")?"seen":"",d.setAttribute("data-id",r(t,"id")),d.innerHTML='<a href="'+r(t,"src")+'" data-link="'+r(t,"link")+'" data-linkText="'+r(t,"linkText")+'" data-time="'+r(t,"time")+'" data-type="'+r(t,"type")+'" data-length="'+r(t,"length")+'"><img data-src="'+r(t,"preview")+'"></a>';var c=l.querySelectorAll(".items")[0];a?c.appendChild(d):u(c,d),function(e){var t=e.getAttribute("data-id"),a=n.querySelectorAll("#"+y+' [data-id="'+t+'"] .items > li'),s=[];o(a,function(e,t){var a=t.firstElementChild,n=a.firstElementChild;s.push({src:a.getAttribute("href"),length:a.getAttribute("data-length"),type:a.getAttribute("data-type"),time:a.getAttribute("data-time"),link:a.getAttribute("data-link"),linkText:a.getAttribute("data-linkText"),preview:n.getAttribute("src")})}),i.data[t].items=s}(l)},i.removeItem=function(e,a){var n=s("#"+y+' > [data-id="'+e+'"] [data-id="'+a+'"]');t.parentNode.removeChild(n)},i.navigateItem=i.nextItem=function(e,t){var a=i.internalData.currentStory,n=i.data[a].currentItem,r=s('#zuck-modal .story-viewer[data-story-id="'+a+'"]'),l="previous"==e?-1:1;if(!r||1==r.touchMove)return!1;var d=r.querySelectorAll('[data-index="'+n+'"]'),c=d[0],u=d[1],v=n+l,m=r.querySelectorAll('[data-index="'+v+'"]'),f=m[0],y=m[1];if(r&&f&&y){var g=h("callbacks","onNavigateItem");(g=h("callbacks",g?"onNavigateItem":"onNextItem"))(a,y.getAttribute("data-story-id"),function(){"previous"==e?(c.classList.remove("seen"),u.classList.remove("seen")):(c.classList.add("seen"),u.classList.add("seen")),c.classList.remove("active"),u.classList.remove("active"),f.classList.remove("seen"),f.classList.add("active"),y.classList.remove("seen"),y.classList.add("active"),o(r.querySelectorAll(".time"),function(e,t){t.innerText=p(y.getAttribute("data-time"))}),i.data[a].currentItem=i.data[a].currentItem+l,x(m,t)})}else r&&"previous"!=e&&k.next(t)};return function(){location.hash=="#!"+y&&(location.hash=""),s("#"+y+" .story")&&o(t.querySelectorAll(".story"),function(e,t){b(t)}),h("backNative")&&e.addEventListener("popstate",function(e){location.hash!="#!"+y&&(location.hash="")},!1),o(h("stories"),function(e,t){i.add(t,!0)}),w();var a=h("avatars")?"user-icon":"story-preview",n=h("list")?"list":"carousel";return t.className="stories "+a+" "+n+" "+(h("skin")+"").toLowerCase(),i}()};return t.buildItem=function(e,t,a,n,i,s,r,o,l){return{id:e,type:t,length:a,src:n,preview:i,link:s,linkText:r,seen:o,time:l}},e.ZuckitaDaGalera=e.Zuck=t,t}();"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.ZuckJS=t):e.ZuckJS=t}(this);